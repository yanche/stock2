
import * as utility from 'utility';
import * as bb from 'bluebird';

function handler(h: utility.http.HttpUtil) {
    const verb = (h.getHeader('verb') || '').toUpperCase();
    const fn = handlermap.get(verb);
    if (fn == null) return bb.reject(new Error(`task handler not found for verb: ${verb}`));
    else return fn(h);
}

const handlermap = new Map<string, (h: utility.http.HttpUtil) => bb<void>>();
handlermap.set('GET', )
