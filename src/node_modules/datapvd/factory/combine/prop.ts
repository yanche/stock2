
import IFactory from '../fac';
import * as def from '../../def';
import * as utility from 'utility';
import * as facutil from '../facutil';

interface PropFacPack extends facutil.TransformPackBase<any> {
    prop: string
}

const propFac: IFactory<PropFacPack, any> = facutil.dpTransform<PropFacPack, any, any>({
    prefix: 'PROP',
    inputlist: [{ name: 'prop', validate: utility.validate.nonEmptyStr }],
    gen: (pack: PropFacPack, dp: def.DataPvd<any>, ts: number): any => {
        return dp.get(ts).then(data => data[pack.prop]);
    }
});

export default propFac;
