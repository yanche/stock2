{
    "_id": "indexes-bdev-macd-diff-100-200-80-nhold300-threshold0.8",
    "name": "MACD(100-200-80)指数底背离(DIFF)",
    "targetScope": {
        "type": "allindexes"
    },
    "envMap": {
        "diff_dp": {
            "type": "c.prop",
            "pack": {
                "prop": "diff",
                "dp": {
                    "type": "b.macd",
                    "pack": {
                        "Ns": 100,
                        "Nl": 200,
                        "Na": 80,
                        "dp": {
                            "type": "r.end",
                            "pack": "{{target}}"
                        }
                    }
                }
            }
        },
        "raw0_dp": {
            "type": "r.const",
            "pack": 0
        },
        "deviate_dp": {
            "type": "x.deviate",
            "pack": {
                "threshold": 0.8,
                "emaxRate": 1,
                "maxDays": 1000,
                "peakRange": 30,
                "dp": {
                    "type": "r.end",
                    "pack": "{{target}}"
                },
                "dpT": {
                    "type": "c.and",
                    "pack": {
                        "defidx": 1,
                        "list": [
                            {
                                "type": "c.lt",
                                "pack": {
                                    "defidx": 0,
                                    "list": [
                                        "{{diff_dp}}",
                                        "{{raw0_dp}}"
                                    ]
                                }
                            },
                            {
                                "type": "c.prop",
                                "pack": {
                                    "prop": "peak",
                                    "dp": {
                                        "type": "x.localpeak",
                                        "pack": {
                                            "range": 30,
                                            "peak": false,
                                            "dp": "{{diff_dp}}"
                                        }
                                    }
                                }
                            }
                        ]
                    }
                },
                "dpV": "{{diff_dp}}"
            }
        }
    },
    "cpdefRef": {
        "type": "c.gt",
        "pack": {
            "list": [
                {
                    "type": "c.prop",
                    "pack": {
                        "dp": "{{deviate_dp}}",
                        "prop": "count"
                    }
                },
                "{{raw0_dp}}"
            ],
            "defidx": 0
        }
    },
    "cpoutdefRef": {
        "type": "ctx.nhold",
        "pack": {
            "N": 300,
            "target": "{{target}}"
        }
    },
    "comments": {
        "sum": "回测样本少，分布不均匀，沪深300，中小板，创业板，中证50有数据，比不过同期创业板收益",
        "desc": "MACD(100-200-80)指数底背离(DIFF)",
        "trigger": {
            "main": "MACD(100-200-80)指数底背离(DIFF)",
            "env": [],
            "opt": [
                "多重底背离"
            ]
        },
        "triggerOut": {
            "main": "固定持有300交易日"
        }
    },
    "concerns": {
        "in": [
            {
                "name": "背离信息",
                "dpRef": "{{deviate_dp}}",
                "view": "raw"
            }
        ],
        "out": []
    },
    "doc": null,
    "lookback": {
        "全部": [
            {
                "val": "全部",
                "total": 27,
                "revGM": 1.3576,
                "revMed": 1.1716,
                "dayM": 455.1111,
                "hrevGM": 1.5797,
                "hrevMed": 1.2947,
                "hdayM": 342.0741,
                "lrevGM": 0.9023,
                "lrevMed": 0.9091,
                "ldayM": 138.1852
            }
        ],
        "收益": [
            {
                "val": "盈利",
                "total": 24,
                "revGM": 1.4225,
                "revMed": 1.187,
                "dayM": 454.375,
                "hrevGM": 1.6206,
                "hrevMed": 1.3129,
                "hdayM": 374.0417,
                "lrevGM": 0.9037,
                "lrevMed": 0.9115,
                "ldayM": 116.5833
            },
            {
                "val": "亏损",
                "total": 3,
                "revGM": 0.9342,
                "revMed": 0.9551,
                "dayM": 461,
                "hrevGM": 1.2875,
                "hrevMed": 1.2947,
                "hdayM": 86.3333,
                "lrevGM": 0.8913,
                "lrevMed": 0.8821,
                "ldayM": 311
            }
        ],
        "背离数": [
            {
                "val": "1",
                "total": 4,
                "revGM": 1.1485,
                "revMed": 1.1239,
                "dayM": 456,
                "hrevGM": 1.2367,
                "hrevMed": 1.2424,
                "hdayM": 421.5,
                "lrevGM": 0.8909,
                "lrevMed": 0.8907,
                "ldayM": 206.5
            },
            {
                "val": "2",
                "total": 7,
                "revGM": 1.2073,
                "revMed": 1.1556,
                "dayM": 455,
                "hrevGM": 1.535,
                "hrevMed": 1.2335,
                "hdayM": 410.4286,
                "lrevGM": 0.8765,
                "lrevMed": 0.8126,
                "ldayM": 69.2857
            },
            {
                "val": "3",
                "total": 12,
                "revGM": 1.3413,
                "revMed": 1.0503,
                "dayM": 457.5,
                "hrevGM": 1.5515,
                "hrevMed": 1.2794,
                "hdayM": 244.5,
                "lrevGM": 0.9144,
                "lrevMed": 0.8827,
                "ldayM": 189.1667
            },
            {
                "val": "4",
                "total": 3,
                "revGM": 2.0635,
                "revMed": 2.0792,
                "dayM": 447,
                "hrevGM": 2.1702,
                "hrevMed": 2.1965,
                "hdayM": 437.3333,
                "lrevGM": 0.9125,
                "lrevMed": 0.9139,
                "ldayM": 34.3333
            },
            {
                "val": "5",
                "total": 1,
                "revGM": 1.9841,
                "revMed": 1.9841,
                "dayM": 448,
                "hrevGM": 2.4619,
                "hrevMed": 2.4619,
                "hdayM": 431,
                "lrevGM": 0.9593,
                "lrevMed": 0.9593,
                "ldayM": 47
            }
        ]
    },
    "glong": true,
    "startDateTs": 16832,
    "runrt": true
}